<!doctype html>
<html lang="zh-tw">

<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Homepage</title>


	<link rel="stylesheet" href="./vendors/bootstrap/bootstrap.min.css">
	<link rel="stylesheet" href="./css/core.css"> <!-- 所有頁面共同的CSS 勿刪，勿覆蓋！！！！！-->
	<link rel="stylesheet" href="./css/font.css"> <!-- 所有頁面共同的CSS 勿刪，勿覆蓋！！！！！-->
	<link rel="stylesheet" href="./css/button.css"> <!-- 所有按鈕共同的CSS 勿動，勿覆蓋！！！！！ 若沒用到按鈕可移除 -->
	<link rel="stylesheet" href="./css/index.header.css"> <!-- header的CSS 勿刪-->
	<link rel="stylesheet" href="./css/index.footer.css"> <!-- footer的CSS 勿刪-->
	<link rel="stylesheet" href="./css/KeyWord.css">
	<link rel="stylesheet" href="./css/login_popup.css">

	<style>
		main {
			min-height: max(800px, calc(100vh - 150px));
			height: 100%;
			background-color: white;
			/* overflow: visible; */
			display: flex;
			flex-direction: column;

		}
	</style>
	<script>const loginRequired = false </script>
</head>

<body>
	<script src="./js/core_customer.js"></script>

	<!-- ----------------------以下是登入彈窗內容------------------------- -->
	<div class="modal" id="login_popup">
		<div class="modal-dialog">
			<div class="modal-content">
				<div class="modal-header">
					<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
				</div>
				<div class="modal-body d-flex justify-content-center align-items-center mb-5">
					<img src="./image/logo.svg" alt="">
				</div>
				<div class="modal-body mb-5">
					<button type="button" class="modal-button">使用Line繼續</button>
					<button type="button" class="modal-button my-4">使用Google繼續</button>
					<p class="text-center">--------------------使用Niigi帳號--------------------</p>
					<button type="button" class="modal-button" data-bs-toggle="modal"
						data-bs-target="#login_Niigi">使用Niigi帳號繼續</button>
				</div>

			</div>
		</div>
	</div>
	<!-- -------------------以下是選擇niigi登入彈窗內容 --------------------->
	<div class="modal fade" id="login_Niigi" tabindex="-1" role="dialog" aria-labelledby="myModalLabel-1"
		aria-hidden="true">
		<div class="modal-dialog" role="document">
			<div class="modal-content">
				<div class="modal-header">
					<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
				</div>
				<div class="modal-body d-flex justify-content-center align-items-center">
					<img src="./image/logo.svg" alt="">
				</div>
				<div class="modal-body d-flex flex-column justify-content-center align-items-center">
					<h4>使用Niigi帳號登入</h4>
					<div style="height: 20px;"></div>
					<div class="text-left">
						<input type="email" id="memberAcct" name="" required placeholder="xxx帳號">
						<div style="height: 20px;"></div>
						<form id="changePasswordForm"
							class="d-flex flex-column justify-content-center align-items-center">
							<div class="form-group">
								<input type="password" id="currentPassword" name="currentPassword" required
									placeholder="密碼">
								<span class="show-password-btn"
									onclick="togglePasswordVisibility('currentPassword')">&#128065;</span>
							</div>
						</form>
					</div>
					<div style="height: 20px;"></div>
					<button type="button" id="login" class="btn-primary">登入</button>
					<div id="errMsg" class="error"></div>
					<div style="height: 20px;"></div>
					<div class="modal-footer d-flex justify-content-between align-items-center">
						<button type="button" class="btn btn-link " data-bs-toggle="modal"
							data-bs-target="#forget_password">忘記密碼</button>
						<hr class="vertical-line">
						<button type="button" class="btn btn-link" data-bs-toggle="modal"
							data-bs-target="#resend_letter">重寄認證信</button>
					</div>
					<p>還不是會員嗎?</p>
					<button type="button" class="btn btn-link" data-bs-toggle="modal"
						data-bs-target="#register_account">立即註冊帳號</button>
				</div>

				<div class="modal-footer d-flex justify-content-center align-items-center">
					<button id="backToPreviousModal" type="button" class="btn btn-link">回上一頁</button>
				</div>
			</div>
		</div>
	</div>
	<!-- -------------------以下是忘記密碼彈窗內容 --------------------->
	<div class="modal fade" id="forget_password" tabindex="-1" role="dialog" aria-labelledby="myModalLabel-2"
		aria-hidden="true">
		<div class="modal-dialog" role="document">
			<div class="modal-content">
				<div class="modal-header">
					<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
				</div>
				<div class="modal-body d-flex justify-content-center align-items-center">
					<img src="./image/logo.svg" alt="">
				</div>
				<div class="modal-body d-flex flex-column justify-content-center align-items-center">
					<h4>重設密碼</h4>
					<div style="height: 20px;"></div>
					<p>請輸入您註冊時的E-mail</p>
					<p>我們會發送一封信件</p>
					<p>點擊信件中的連結以重設密碼</p>
					<div style="height: 20px;"></div>
					<input type="email" id="" name="" required placeholder="請輸入E-mail">
					<div style="height: 20px;"></div>
					<button type="button" class="btn-primary" data-bs-dismiss="modal">送出</button>
				</div>
				<div class="modal-footer d-flex justify-content-center align-items-center">
					<button id="backToPreviousModal-2" type="button" class="btn btn-link">回上一頁</button>
				</div>
			</div>
		</div>
	</div>
	<!-- -------------------以下是重寄認證信彈窗內容 --------------------->
	<div class="modal fade" id="resend_letter" tabindex="-1" role="dialog" aria-labelledby="myModalLabel-2"
		aria-hidden="true">
		<div class="modal-dialog" role="document">
			<div class="modal-content">
				<div class="modal-header">
					<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
				</div>
				<div class="modal-body d-flex justify-content-center align-items-center">
					<img src="./image/logo.svg" alt="">
				</div>
				<div class="modal-body d-flex flex-column justify-content-center align-items-center">
					<h4>重新寄送認證信</h4>
					<div style="height: 20px;"></div>
					<p>請輸入您註冊時的E-mail</p>
					<p>我們會發送一封認證信</p>
					<p>點擊信件中的連結以開通</p>
					<div style="height: 20px;"></div>
					<input type="email" id="" name="" required placeholder="請輸入E-mail">
					<div style="height: 20px;"></div>
					<button type="button" class="btn-primary" data-bs-dismiss="modal">送出</button>
				</div>
				<div class="modal-footer d-flex justify-content-center align-items-center">
					<button id="backToPreviousModal-3" type="button" class="btn btn-link">回上一頁</button>
				</div>
			</div>
		</div>
	</div>
	<!-- -------------------以下是註冊新帳號彈窗內容 --------------------->
	<div class="modal fade" id="register_account" tabindex="-1" role="dialog" aria-labelledby="myModalLabel-2"
		aria-hidden="true">
		<div class="modal-dialog" role="document">
			<div class="modal-content">
				<div class="modal-header">
					<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
				</div>
				<div class="modal-body d-flex justify-content-center align-items-center">
					<img src="./image/logo.svg" alt="">
				</div>
				<div class="modal-body d-flex flex-column justify-content-center align-items-center">
					<h4>註冊帳號</h4>
					<div style="height: 20px;"></div>
					<div class="d-flex justify-content-center align-items-center">
						<form id="changePasswordForm" class="d-flex flex-column">
							<div id="msg" class="error"></div>
							<div class="form-group">
								<label for="account-number">帳號：</label>
								<input type="email" id="newmemberAcct" name="newmemberAcct" required
									placeholder="請輸入信箱">
								<div class="error" id="acctError"></div>
							</div>
							<div style="height: 20px;"></div>
							<div class="form-group">
								<label for="newPassword1">密碼：</label>
								<input type="password" id="newPassword" name="newPassword" required
									placeholder="8-16位英文字母，數字和符號混合">
								<style>
									#newPassword::placeholder {
										font-size: 12px;
									}
								</style>
								<span class="show-password-btn"
									onclick="togglePasswordVisibility('newPassword')">&#128065;</span>
								<div class="error" id="passwordError"></div>
							</div>
							<div style="height: 20px;"></div>
							<div class="form-group">
								<label for="confirmPassword-3">確認密碼：</label>
								<input type="password" id="confirmPassword" name="confirmPassword" required
									placeholder="再次確認密碼">
								<span class="show-password-btn"
									onclick="togglePasswordVisibility('confirmPassword')">&#128065;</span>
								<div class="error" id="confirmPasswordError"></div>
							</div>
							<div style="height: 20px;"></div>
							<div class="form-group">
								<label for="fullname">姓名：</label>
								<input type="text" id="fullname" name="fullname" value="">
								<div class="error" id="fullnameError"></div>
							</div>
							<div style="height: 20px;"></div>
							<div class="form-group">
								<label for="phone">手機：</label>
								<input type="tel" id="phone" name="phone" value="">
								<div class="error" id="phoneError"></div>
							</div>
							<div style="height: 20px;"></div>
							<div class="form-group">
								<label for="gender">性別：</label>
								<input type="radio" id="male" name="quantity" value="male">
								<label for="male">男性</label>
								<input type="radio" id="female" name="quantity" value="female">
								<label for="female">女性</label>
								<div class="error" id="genderError"></div>
							</div>
							<div style="height: 20px;"></div>
							<div class="form-group">
								<label for="birthday">生日：</label>
								<input type="date" id="birthday" name="birthday">
								<div class="error" id="birthdayError"></div>
							</div>
							<div style="height: 20px;"></div>
							<div class="my-3">
								<td class="tds">驗證碼：</td>
								<input type="text" name="valistr" class="my-2" id="company-captchaInput">
							</div>
							<div>
								<td id="validimg">
									<img id="company-yzm_img" src="" style="cursor: pointer" />
									<span id="company-valistr_msg"></span>
								</td>
							</div>
							<div style="height: 20px;"></div>
							<button type="button" class="btn-primary" id="register">註冊</button>
						</form>
					</div>
				</div>
				<div class="modal-footer d-flex justify-content-center align-items-center">
					<button id="backToPreviousModal-4" type="button" class="btn btn-link">回上一頁</button>
				</div>
			</div>
		</div>
	</div>

	<!-- -------------------------------- 以下是商品分類導覽列 勿動！！ -------------------------------- -->
	<nav id="main-navigation" class="main-navigation">
		<ul class="main-nav"> <!--主選單-->
			<li
				class="navigation-nav-title navigation_nav-title--highlight navigation_nav-title--hover-hide navigation_nav-title--new-dot">
				<div class="navigation_title navigation_title--bold navigation_title--salmon">
					<span class="navigation_title-inner">主題活動</span>
				</div>
			</li>

			<li class="navigation-nav-title navigation_nav-title--hover-hide">

				<a class="navigation_title navigation_title--link" href="categoriePage.html?text=3C周邊"
					onclick="passTextToNextPage('3C周邊')">
					<span class="navigation_title-inner">3C周邊</span>
				</a>
			</li>
			<li class="navigation-nav-title navigation_nav-title--hover-hide">

				<a class="navigation_title navigation_title--link" href="categoriePage.html?text=家用電器"
					onclick="passTextToNextPage('家用電器')">
					<span class="navigation_title-inner">家用電器</span>
				</a>
			</li>
			<li class="navigation-nav-title navigation_nav-title--hover-hide">
				<a class="navigation_title navigation_title--link" href="categoriePage.html?text=美妝個清"
					onclick="passTextToNextPage('美妝個清')">
					<span class="navigation_title-inner">美妝個清</span>
				</a>
			</li>
			<li class="navigation-nav-title navigation_nav-title--hover-hide">
				<a class="navigation_title navigation_title--link" href="categoriePage.html?text=流行服飾"
					onclick="passTextToNextPage('流行服飾')">
					<span class="navigation_title-inner">流行服飾</span>
				</a>
			</li>
			<li class="navigation-nav-title navigation_nav-title--hover-hide">
				<a class="navigation_title navigation_title--link" href="categoriePage.html?text=鞋包配飾"
					onclick="passTextToNextPage('鞋包配飾')">
					<span class="navigation_title-inner">鞋包配飾</span>
				</a>
			</li>
			<li class="navigation-nav-title navigation_nav-title--hover-hide">
				<a class="navigation_title navigation_title--link" href="categoriePage.html?text=母嬰用品"
					onclick="passTextToNextPage('母嬰用品')">
					<span class="navigation_title-inner">母嬰用品</span>
				</a>
			</li>
			<li class="navigation-nav-title navigation_nav-title--hover-hide">

				<a class="navigation_title navigation_title--link" href="categoriePage.html?text=日用生活"
					onclick="passTextToNextPage('日用生活')">
					<span class="navigation_title-inner">日用生活</span>
				</a>
			</li>
			<li class="navigation-nav-title navigation_nav-title--hover-hide">

				<a class="navigation_title navigation_title--link" href="categoriePage.html?text=圖書文具"
					onclick="passTextToNextPage('圖書文具')">
					<span class="navigation_title-inner">圖書文具</span>
				</a>
			</li>
			<li class="navigation-nav-title navigation_nav-title--hover-hide">

				<a class="navigation_title navigation_title--link" href="categoriePage.html?text=旅遊戶外"
					onclick="passTextToNextPage('旅遊戶外')">
					<span class="navigation_title-inner">旅遊戶外</span>
				</a>
			</li>

		</ul>

	</nav>

	<main>
		<!-- -------------分類table---------------- -->
		<!--<div class="container tableone">
			<div class="row">
				<div class="col">
					<div class="table-responsive">
						<table class="table table-bordered">
							<table class="table table-bordered">
								<tbody>
									<tr>
										<td class="bg-light">分類</td>
										<td>資料 2</td>
										<td>資料 3</td>
										<td>資料 4</td>
									</tr>
									<tr>
										<td class="bg-light">規格</td>
										<td>資料 6</td>
										<td>資料 7</td>
										<td>資料 8</td>
									</tr>
								</tbody>
							</table>
						</table>
					</div>
				</div>
				<div class="col">
					<div class="alldro">
						<div class="dropdown">
							<button class="btn btn-secondary dropdown-toggle" type="button" id="dropdownMenuButton1"
								data-bs-toggle="dropdown" aria-expanded="false">
								Dropdown button
							</button>
							<ul class="dropdown-menu" aria-labelledby="所有選項">
								<li><a class="dropdown-item" href="#">Action</a></li>
								<li><a class="dropdown-item" href="#">Another action</a></li>
								<li><a class="dropdown-item" href="#">Something else here</a></li>
							</ul>
						</div>
						<div class="dropdown">
							<button class="btn btn-secondary dropdown-toggle" type="button" id="dropdownMenuButton1"
								data-bs-toggle="dropdown" aria-expanded="false">
								Dropdown button
							</button>
							<ul class="dropdown-menu" aria-labelledby="所有選項">
								<li><a class="dropdown-item" href="#">Action</a></li>
								<li><a class="dropdown-item" href="#">Another action</a></li>
								<li><a class="dropdown-item" href="#">Something else here</a></li>
							</ul>
						</div>
					</div>

				</div>
			</div>
		</div>  -->

		<!-- -------------水平線與搜尋字樣---------------- -->
		<!--<div style="display: flex; justify-content: center;">
			<hr class="hr" style="width: 73%; height: 3px; background-color: black;">
		</div> -->
		<h2 class="serch_Keyword" style="margin-top: 40px;margin-bottom: 40px;"></h2>

		<!-- -------------排序table--------------- -->
		<!--<div class="container tabletwo">
			<div class="row">
				<div class="col">
					<div class="table-responsive">
						<table class="table table-bordered">
							<table class="table table-bordered">
								<tbody>
									<tr>
										<td class="bg-light">綜合排序</td>
										<td>月銷量</td>
										<td>新上市</td>
										<td>評價</td>
										<td>價格</td>
										<td>活動</td>
									</tr>
								</tbody>
							</table>
						</table>
					</div>
				</div>
			</div>
		</div> -->

		<!-- -------------商品列表--------------- -->

		<div class="container tablethird">
			<div class="row" id="ExProduct">



			</div>
		</div>


		<!-- -------------放page碼的地方--------------- -->
		<div id="pagination" class="pagination justify-content-center"></div>

	</main>



	<!-- --------------------------------以下是Footer 勿動！！-------------------------------- -->
	<footer id="main-footer" class="footer">

		<div class="container-sm">

			<div class="footer-top row">
				<a class="footer_logo col-sm-2 " href="/"><img class="logo" src="./image/logo.svg" alt=""></a>
			</div>

			<hr class="footer_divider">

			<div class="footer-bottom row justify-content-end">

				<nav class="SNS-nav-list ">

					<a href="" class="Instagram col">
						<div class="Instagram_icon">
							<img src="./image/ant-design_instagram-filled.svg" alt="">
						</div>
					</a>

					<a href="" class="Facebook col">
						<div class="Facebook_icon">
							<img src="./image/mdi_facebook.svg" alt="">
						</div>
					</a>

					<a href="" class="Twitter col ">
						<div class="Twitter_icon">
							<img src="./image/ant-design_twitter-circle-filled.svg" alt="">
						</div>
					</a>
				</nav>
			</div>
		</div>
	</footer>

	<script src="./vendors/bootstrap/bootstrap.bundle.min.js"></script>
	<script src="./vendors/jquery/jquery-3.7.0.min.js"></script>
	<script>
		function passTextToNextPage(text) {
			// 將文字傳遞給下一頁
			localStorage.setItem('textData', text);
		}

		function validateForm() {
			var inputText = document.querySelector('.header-search-input').value.trim();
			if (inputText === '') {
				return false; // 阻止表單提交
			}
			// 如果不是空值或空字串，允許表單提交
			return true;
		}

		function displayImageFromBase64(base64ImageData) {
			const imageBinaryStr = atob(base64ImageData);
			let len = imageBinaryStr.length;
			const uint8Array = new Uint8Array(len);
			while (len--) {
				uint8Array[len] = imageBinaryStr.charCodeAt(len);
			}
			const blob = new Blob([uint8Array]);
			const blobUrl = URL.createObjectURL(blob); // 產生 Blob URL
			// document.querySelector('#avatar').src = blobUrl; // 設定圖片的 src 屬性
			return blobUrl; // 返回 Blob URL
		}


		// 顯示特定頁面的資料
		function showDataForPage(data, page) {
			const itemsPerPage = 12; // 每頁顯示的資料數量
			const listContainer = $('#ExProduct'); // 資料顯示的容器

			listContainer.html(''); // 清空容器
			const startIndex = (page - 1) * itemsPerPage;
			const endIndex = Math.min(startIndex + itemsPerPage, data.length);

			for (let i = startIndex; i < endIndex; i++) {
				const product = data[i];
				// 取得產品ID
				const productId = product.productId;
				// 取得產品名稱
				const productName = product.productName;
				// 取得產品價格
				const productPrice = product.productPrice;
				// 取得產品圖片的 Base64 字串
				const base64Image = displayImageFromBase64(product.picture1);
				// 取得商店名稱
				const ShopName = product.suppliers.shopName;

				// 也可以將其他產品資料顯示在網頁上
				const itemHtml = `
            <div class="col-12 col-sm-6 col-md-4 col-lg-3 col-xxl-2 tablethird" style="padding-bottom:30px;">
              <div class="card" style="width:200px;height:28rem;">
                <img src="${base64Image}" id="${productId}" class="card-img-top linkable-image" alt="BROTHER BOX" style="height: 260px;">
                <div class="card-body">
                  <h5 class="card-title item__name">${productName}<img class="heart"
                    src="./image/heart_zero.svg" alt=""></i></h5>
                  <p class="card-text item__price">$${productPrice}</p>
                  <p class="card-text item__store">${ShopName}</p>
                </div>
              </div>
            </div>
          `;
				listContainer.append(itemHtml); // 將資料加入容器
			}
		}




		document.addEventListener("DOMContentLoaded", function () {
			// 從 localStorage 中取得文字資料
			var textData = localStorage.getItem('textData');
			// 獲取URL中的參數值
			const urlParams = new URLSearchParams(window.location.search);
			const text = urlParams.get('text');

			// 如果有文字資料，就使用它來處理後續邏輯
			if (textData == "新品上市") {
				// 在這裡處理後續邏輯，例如將文字送往後端處理
				// console.log("接收到的文字資料：" + textData);
				fetch('../product/products', {
					method: 'POST',
					body: JSON.stringify({num: "0"}),
					headers: {
						'Content-Type': 'application/json'
					}
				})
					.then((response) => {
						// 檢查回應的狀態碼
						if (!response.ok) {
							throw new Error('Network response was not ok');
						}
						// 解析JSON格式的回應
						return response.json();
					})
					.then((data) => {
						$('.serch_Keyword').text(`${textData}`);
						const totalPages = Math.ceil(data.length / 12); // 總頁數
						let currentPage = 1; // 當前頁數，預設為第1頁

						// 顯示特定頁面的資料
						function renderPage() {
							showDataForPage(data, currentPage);
						}

						// 初始化顯示第1頁的資料
						renderPage();

						// 顯示分頁按鈕
						function renderPaginationButtons() {
							const paginationContainer = $('#pagination');
							paginationContainer.html(''); // 清空分頁容器

							for (let i = 1; i <= totalPages; i++) {
								const buttonHtml = `<button class="pagination-button" data-page="${i}">${i}</button>`;
								paginationContainer.append(buttonHtml);
							}

							// 加入分頁按鈕的點擊事件處理
							$('.pagination-button').click(function () {
								const page = parseInt($(this).data('page'));
								currentPage = page;
								renderPage();
							});
						}

						// 顯示分頁按鈕
						renderPaginationButtons();
					})
					.catch((error) => {
						console.error('Fetch error:', error);
					});

			} else if (textData == "推薦商品") {

				fetch('../product/exproducts', {
					method: 'POST',
					body: JSON.stringify({num: "0"}),
					headers: {
						'Content-Type': 'application/json'
					}
				})
					.then((response) => {
						// 檢查回應的狀態碼
						if (!response.ok) {
							throw new Error('Network response was not ok');
						}
						// 解析JSON格式的回應
						return response.json();
					})
					.then((data) => {
						$('.serch_Keyword').text(`${textData}`);
						const totalPages = Math.ceil(data.length / 12); // 總頁數
						let currentPage = 1; // 當前頁數，預設為第1頁

						// 顯示特定頁面的資料
						function renderPage() {
							showDataForPage(data, currentPage);
						}

						// 初始化顯示第1頁的資料
						renderPage();

						// 顯示分頁按鈕
						function renderPaginationButtons() {
							const paginationContainer = $('#pagination');
							paginationContainer.html(''); // 清空分頁容器

							for (let i = 1; i <= totalPages; i++) {
								const buttonHtml = `<button class="pagination-button" data-page="${i}">${i}</button>`;
								paginationContainer.append(buttonHtml);
							}

							// 加入分頁按鈕的點擊事件處理
							$('.pagination-button').click(function () {
								const page = parseInt($(this).data('page'));
								currentPage = page;
								renderPage();
							});
						}

						// 顯示分頁按鈕
						renderPaginationButtons();
					})
					.catch((error) => {
						console.error('Fetch error:', error);
					});

			} else {

				// 使用fetch API向後端發送請求
				fetch('../product/searchCategorie?text=' + encodeURIComponent(text), {
					method: 'GET'
				})
					.then((response) => {
						// 檢查回應的狀態碼
						if (!response.ok) {
							throw new Error('Network response was not ok');
						}
						// 解析JSON格式的回應
						return response.json();
					})
					.then((data) => {
						// 在這裡你可以處理後端回傳的資料，並將整理後的資料呈現在當前頁面上
						//console.log(data);
						let list_html = "";
						$('.serch_Keyword').text(`${text}`);

						data.forEach(function (product) {
							// 在這裡對每個產品進行處理
							//取得產品ID
							const productId = product.productId;
							// 取得產品名稱
							const productName = product.productName;
							// 取得產品價格
							const productPrice = product.productPrice;
							// 取得產品圖片的 Base64 字串
							const base64Image = displayImageFromBase64(product.picture1);
							//取得商店名稱
							const ShopName = product.suppliers.shopName;

							// 也可以將其他產品資料顯示在網頁上
							list_html += `
							<div class="col-12 col-sm-6 col-md-4 col-lg-3 col-xxl-2 tablethird" style="padding-bottom:30px;">
								<div class="card" style="width:200px;height:28rem;">
									<img src="${base64Image}" id="${productId}" class="card-img-top linkable-image" alt="BROTHER BOX" style="height: 260px;">
									<div class="card-body">
										<h5 class="card-title item__name">${productName}<img class="heart"
											src="./image/heart_zero.svg" alt=""></i></h5>
										<p class="card-text item__price">$${productPrice}</p>
										<p class="card-text item__store">${ShopName}</p>
									</div>
								</div>
							</div>
									`;
						});

						$('#ExProduct').html(list_html);
					})
					.catch((error) => {
						console.error('Fetch error:', error);
					});

			}

			// 使用完畢後，可以將 localStorage 中的 textData 清空，避免影響下一次的使用
			localStorage.removeItem('textData');

		});


		$(document).on('click', '.heart', function (event) {

			if ($(event.currentTarget).hasClass('-on')) {
				$(event.currentTarget).attr('src', "./image/heart_zero.svg");
				$(event.currentTarget).removeClass('-on');

			} else {
				$(event.currentTarget).attr('src', "./image/heart_fill.svg");
				$(event.currentTarget).addClass('-on');
			}

		});

		$(document).on('click', '.linkable-image', function (event) {
			const clickedImageId = event.currentTarget.getAttribute('id');
			window.location.href = `product.html?productId=${clickedImageId}`;
			//console.log("Clicked image ID:", clickedImageId);
			//console.log(event);
		});


	</script>
	<script src="./js/login_popup.js"></script>
</body>

</html>