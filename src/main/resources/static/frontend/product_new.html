<!doctype html>
<html lang="zh-tw">

<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Member Check Order</title>

	<link rel="stylesheet" href="./vendors/bootstrap/bootstrap.min.css">
	<link rel="stylesheet" href="./css/core.css">
	<link rel="stylesheet" href="./css/font.css">
	<link rel="stylesheet" href="./css/button.css">
	<link rel="stylesheet" href="./css/index.header.css"> <!-- header的CSS 勿刪-->
	<link rel="stylesheet" href="./css/index.footer.css"> <!-- footer的CSS 勿刪-->
	<link rel="stylesheet" href="./css/customer.aside.css">


	<style>
		main.main_content {
			height: 100;
			background-color: #ffffff;
		}

		div.main_content {
			font-size: 0;
		}

		/* main content */
		main.member-check-order {
			display: inline-block;
			vertical-align: top;
			padding-left: 25px;
		}

		div.main-content-icon {
			width: 6rem;
		}

		div.main-content-header img,
		div.main-content-header>h1 {
			display: inline-block;
			vertical-align: bottom;
		
		}

		hr.main-content-divider {
			width: 100%;
			border: 1px solid #EEEEEE;
			margin: 18px 0 28px 0;
			opacity: 1;
		}

		/* Tab */
		.nav-tabs {
			--bs-nav-tabs-border-color: #f7f7f7;
			--bs-nav-tabs-border-width: 2px;
			--bs-nav-tabs-border-radius: 0.5rem
		}

		.nav-tabs .nav-link {
			margin-bottom: calc(-1 * var(--bs-nav-tabs-border-width));
			border: var(--bs-nav-tabs-border-width);
			border-top-left-radius: var(--bs-nav-tabs-border-radius);
			border-top-right-radius: var(--bs-nav-tabs-border-radius);
			width: 12rem;
			height: 5rem;
			text-align: center;
			vertical-align: middle;
			font-style: normal;
			font-weight: 600;
			font-size: 2.4rem;
			color: #4C4C4C;
			background-color: #f7f7f7;
			margin-right: 1.5px;
		}

		.nav-tabs .nav-item.show .nav-link,
		.nav-tabs .nav-link.active {
			color: #4C4C4C;
			background-color: rgba(183, 221, 229, 0.60);
		}

		main.member-check-order {
			display: inline-block;
			vertical-align: top;
			padding-left: 25px;
		}

		/* ---- */
		.product_content {
			height: 1200px;
			margin-top: 30px;
			margin-left: 50px;
		}

		.product_content p {
			margin-bottom: 40px;
		}

		.product_content>p>span:first-child {
			/* 在這裡設置位移屬性 */
			margin-right: 30px;
		}

		.product_content>p:last-of-type>span:first-child {
			/* 在這裡設置位移屬性 */
			margin-right: 15px;
		}

		.product_img {
			background-color: white;
			width: 100px;
			height: 100px;
			border: 1px solid darkgrey;
		}

		.annotation {
			font-size: 12px;
			margin-left: 100px;
		}

		.productName {
			width: 530px;
		}

		.product_illustrate {
			width: 530px;
			height: 200px;
			word-break: break-all;
			/* 達到邊界時自動換行 */

			resize: none;

		}

		.category_select {
			width: 190px;
		}

		/* ------------------5張圖地方----------------------- */
		.img_file {
			display: none;
		}

		.img_file+label {
			display: inline-block;
			background-color: lightgrey;
			color: black;
			padding: 6px 12px;
			border-radius: 5px;
			cursor: pointer;
			font-size: 10px;
			/* 調整文字大小 */
			border: 1px solid black;
			/* 添加邊框 */
			margin-top: 5px;
			margin-right: 22px;
		}

		.img_file+label::before {
			content: '選擇檔案';
			display: inline-block;
			vertical-align: middle;
			margin-right: 5px;
			/* 調整圖示和文字之間的間距 */
			font-size: 12px;
			/* 調整圖示大小 */
		}

		/* ------------------新申請彈窗----------------------- */
		/*選擇圖片的按鈕*/
		.img_spc_file {
			display: none;
		}

		.img_spc_file+label {
			display: inline-block;
			background-color: lightgrey;
			color: black;
			border-radius: 5px;
			cursor: pointer;
			font-size: 5px;
			/* 調整文字大小 */
			border: 1px solid black;
			/* 添加邊框 */
			margin-top: 5px;
		}

		.img_spc_file+label::before {
			content: '選擇檔案';
			display: inline-block;
			vertical-align: middle;
			margin-right: 5px;
			/* 調整圖示和文字之間的間距 */
			font-size: 10px;
			/* 調整圖示大小 */
		}

		/*表格的地方*/

		.spec_table_new {
			border-bottom: 1px solid #EEEEEE;
		}

		.spec_table_old {
			border-bottom: 1px solid #EEEEEE;
		}

		.spec_table_new th {
			background-color: #EEEEEE;
			width: 100px;
			height: 50px;
			text-align: center;
			padding: 3px;
		}

		.spec_table_old th {
			background-color: #EEEEEE;
			width: 100px;
			height: 50px;
			text-align: center;
			padding: 3px;
		}

		.spec_table_new tr {
			border-bottom: 1px solid darkgrey;
			;
		}

		.spec_table_old tr {
			border-bottom: 1px solid darkgrey;
			;
		}

		.spec_table_new td {
			height: 100px;
			width: 100px;
			text-align: center;
			padding: 3px;
		}

		.spec_table_old td {
			height: 100px;
			width: 100px;
			text-align: center;
			padding: 3px;
		}

		.product_spec_img {
			width: 60px;
			height: 60px;
			border: 1px solid darkgrey;
		}

		.specType1,
		.specType2 {
			width: 60px;
		}

		.specInfo1,
		.specInfo2 {
			width: 180px;
		}

		.initialStock {
			width: 70px;
		}
		
		/* breadcrumb */

		ol.breadcrumb {
			font-size: 1.4rem;
			margin: 0;
			padding: 0 0 0.5rem 0.5rem;

		}

		ol.breadcrumb a,
		ol.breadcrumb li,
		.breadcrumb-item.active {
			color: #94A3B8;
			text-decoration: none;
			font-weight: 500;
		}
	</style>
	<script>const loginRequired = true </script>
</head>

<body>
	<script src="./js/core_supplier.js"></script>
	<!-- -------------------------------- 以下是Header 勿動！！！！-------------------------------- -->
	<header id="main-header" class="header">

		<div class="container-sm">

			<div class="header-top row">

				<div class="col-sm-2">
					<a class="header-logo" href="/"><img class="logo" src="../frontend/image/logo.svg" alt=""></a>
				</div>

				<div class="col-sm-8">
					<form action="" method="get" class="header-search row">
						<input type="text" name="search" class="header-search-input col-sm-10" placeholder="Search"
							maxlength="50" value="">

						<button type="submit" class="header-search-submit col-sm-1"><img
								src="../frontend/image/search.svg"></button>
					</form>

				</div>

				<nav class="fixed-nav col-sm-2">

					<div class="fixed-nav-list row">
				
						<a href="" class="Notification col">
							<div class="header_icon">
								<img src="../frontend/image/Notification.svg" alt="">
								<span class="count -active">0</span>
							</div>
						</a>

					</div>

				</nav>
			</div>

		</div>

	</header>

	<main class="main_content">

		<div class="main_content container-sm">

			<aside class="member-aside col-sm-2">

				<div class="member-profile row ">
					<div class="memberPhoto col-sm-4">
						<img class="memberPhoto" src="../frontend/image/AE404A5E-7B08-4A2A-B1A1-8D3F8FEE9CB8.png">
					</div>
					<div class="member-info col-sm-8">
						<h4 class="memberAccount"></h4>
						<h6 id="supplierId"></h6>
					</div>
				</div>
				<ul class="nav1_list">
					<li>
						<h4>MENU</h4>
					</li>
					<li>
						<a href="../frontend/supplier_center.html">
							<img src="../frontend/image/Chart.svg" alt="">
							<img src="../frontend/image/Chart-a.svg" alt="">商家中心
						</a>
					</li>
					<li>
						<a href="#">
							<img src="../frontend/image/DocumentAsh.svg" alt="">
							<img src="../frontend/image/DocumentAsh-a.svg" alt="">訂單狀態</a>
					</li>
					<li class="active">
						<a href="../frontend/productManage.html">
							<img src="../frontend/image/Edit.svg" alt="">
							<img src="../frontend/image/Edit.svg" alt="">商品管理</a>
					</li>
					<li>
						<a href="../frontend/event_management.html">
							<img src="../frontend/image/Discount.svg" alt="">
							<img src="../frontend/image/Discount-a.svg" alt="">行銷活動</a>
					</li>
					<li>
						<a href="#">
							<img src="../frontend/image/Shield Done.svg" alt="">
							<img src="../frontend/image/Shield Done.svg" alt="">廣告管理</a>
					</li>
					<li>
						<a href="#">
							<img src="../frontend/image/Wallet.svg" alt="">
							<img src="../frontend/image/Wallet-a.svg" alt="">財務管理</a>
					</li>
					<li>
						<a href="#">
							<img src="../frontend/image/Activity.svg" alt="">
							<img src="../frontend/image/Activity.svg" alt="">數據中心</a>
					</li>
					<li>
						<a href="#">
							<img src="../frontend/image/Game.svg" alt="">
							<img src="../frontend/image/Game-s-a.svg" alt="">假期模式</a>
					</li>
					<li>
						<h4>OTHERS</h4>
					</li>
					<li>
						<a href="#">
							<img src="../frontend/image/Profile1.svg" alt="">
							<img src="../frontend/image/Profile1-a.svg" alt="">商家資訊</a>
					</li>
					<li>
						<a href="#">
							<img src="../frontend/image/2 User.svg" alt="">
							<img src="../frontend/image/2 User.svg" alt="">使用者管理</a>
					</li>
					<li>
						<a href="#">
							<img src="../frontend/image/Setting.svg" alt="">
							<img src="../frontend/image/Setting-a.svg" alt="">帳號管理</a>
					</li>
					<li>
						<a href="#">
							<img src="../frontend/image/Info Square.svg" alt="">
							<img src="../frontend/image/Info Square-a.svg" alt="">取得協助</a>
					</li>
					<li>
						<a href="" onclick="logout();">
							<img src="../frontend/image/Logout.svg" alt="">
							<img src="../frontend/image/Logout-a.svg" alt="">登出</a>
					</li>
				</ul>
			</aside>
			<main class="member-check-order col-sm-10">
				<div class="main-content-header row">
					<div class="suplier-breadcrumb col-sm-12">
						<nav aria-label="breadcrumb">
							<ol class="breadcrumb">
								<li id="breadSupplierAcct" class="breadcrumb-item"><a href="/frontend/supplier_center.html"></a></li>
								<li class="breadcrumb-item active" aria-current="page">商品管理</li>
							</ol>
						</nav>
					</div>
					<div class="main-content-icon col-sm-1">
						<img calss="main-content-icon" src="./image/productManage.svg">
					</div>
					<h1 class="main-content-title col-sm-10">商品管理</h1>
					<hr class="main-content-divider">
				</div>
				<main class="member-check-order col-sm-10">
					<h2>商品詳情</h2>
					<div class="product_content">
						<p>
							<span>商品編號</span>
							<span class="productId" style="font-size: 10px;color: red;"></span>
						</p>
						<p style="margin-bottom: 10px">
							<span>商品圖片</span>
							<span>
								<img class="product_img" id="image1" src="./image/square.svg" alt="">
								<img class="product_img" id="image2" src="./image/square.svg" alt="">
								<img class="product_img" id="image3" src="./image/square.svg" alt="">
								<img class="product_img" id="image4" src="./image/square.svg" alt="">
								<img class="product_img" id="image5" src="./image/square.svg" alt="">
							</span>
						</p>
						<P style="margin-left: 115px;margin-bottom: 10px;">
							<input type="file" class="img_file" id="fileInput1" data-target="#image1" />
							<label for="fileInput1"></label>
							<input type="file" class="img_file" id="fileInput2" data-target="#image2" />
							<label for="fileInput2"></label>
							<input type="file" class="img_file" id="fileInput3" data-target="#image3" />
							<label for="fileInput3"></label>
							<input type="file" class="img_file" id="fileInput4" data-target="#image4" />
							<label for="fileInput4"></label>
							<input type="file" class="img_file" id="fileInput5" data-target="#image5" />
							<label for="fileInput5"></label>
						</P>
						<p class="annotation">*最多可上傳5張商品圖片，尺寸：1000 x 1000 px；類型：.jpg、.jpeg；大小：1MB以下</p>
						<p>
							<span>商品名稱</span>
							<span><input class="productName" type="text" placeholder="最多30字" maxlength="30"
									value=""></span>
						</p>
						<p>
							<span style="vertical-align: top;">商品說明</span>
							<span><textarea class="product_illustrate" placeholder="最多200字"
									maxlength="200"></textarea></span>
						</p>
						<p>
							<span>商品分類</span>
							<span>
								<select class="category_select">
									<option value="" selected disabled>請選擇商品分類</option>
									<optgroup label="3C周邊">
										<option value="C000000001">3C周邊</option>
										<option value="C000000002">手機</option>
										<option value="C000000003">電腦</option>
										<option value="C000000004">攝影器材</option>
										<option value="C000000005">耳機</option>
										<option value="C000000006">智慧家居</option>
										<option value="C000000007">電子配件</option>
										<option value="C000000008">遊戲周邊</option>
										<option value="C000000009">行動電源</option>
										<option value="C000000010">影音娛樂</option>
									</optgroup>
									<optgroup label="家用電器">
										<option value="C000000011">家用電器</option>
										<option value="C000000012">冰箱</option>
										<option value="C000000013">洗衣機</option>
										<option value="C000000014">電視</option>
										<option value="C000000015">冷氣</option>
										<option value="C000000016">烤箱</option>
										<option value="C000000017">吸塵器</option>
										<option value="C000000018">咖啡機</option>
										<option value="C000000019">電飯煲</option>
										<option value="C000000020">電熱水壺</option>
									</optgroup>
									<optgroup label="美妝個清">
										<option value="C000000021">美妝個清</option>
										<option value="C000000022">護膚品</option>
										<option value="C000000023">彩妝</option>
										<option value="C000000024">保養工具</option>
										<option value="C000000025">香水</option>
										<option value="C000000026">美髮工具</option>
										<option value="C000000027">身體保養</option>
										<option value="C000000028">美甲工具</option>
										<option value="C000000029">沐浴用品</option>
										<option value="C000000030">臉部清潔</option>
									</optgroup>
									<optgroup label="流行服飾">
										<option value="C000000031">流行服飾</option>
										<option value="C000000032">男士上衣</option>
										<option value="C000000033">女士上衣</option>
										<option value="C000000034">男士下著</option>
										<option value="C000000035">女士下著</option>
										<option value="C000000036">男士外套</option>
										<option value="C000000037">女士外套</option>
										<option value="C000000038">男士睡衣</option>
										<option value="C000000039">女士睡衣</option>
										<option value="C000000040">襪子</option>
									</optgroup>
									<optgroup label="鞋包配飾">
										<option value="C000000041">鞋包配飾</option>
										<option value="C000000042">女士包包</option>
										<option value="C000000043">男士包包</option>
										<option value="C000000044">女鞋</option>
										<option value="C000000045">男鞋</option>
										<option value="C000000046">飾品</option>
										<option value="C000000047">皮帶</option>
										<option value="C000000048">手錶</option>
										<option value="C000000049">帽子</option>
										<option value="C000000050">太陽眼鏡</option>
									</optgroup>
									<optgroup label="母嬰用品">
										<option value="C000000051">母嬰用品</option>
										<option value="C000000052">嬰兒尿布</option>
										<option value="C000000053">嬰兒奶瓶</option>
										<option value="C000000054">嬰兒車</option>
										<option value="C000000055">嬰兒床</option>
										<option value="C000000056">嬰兒衣服</option>
										<option value="C000000057">嬰兒餐椅</option>
										<option value="C000000058">孕婦用品</option>
										<option value="C000000059">嬰兒玩具</option>
										<option value="C000000060">嬰兒益智</option>
									</optgroup>
									<optgroup label="日用生活">
										<option value="C000000061">日用生活</option>
										<option value="C000000062">廚房用具</option>
										<option value="C000000063">衛生用品</option>
										<option value="C000000064">家庭清潔</option>
										<option value="C000000065">居家裝飾</option>
										<option value="C000000066">浴室用品</option>
										<option value="C000000067">寢具用品</option>
										<option value="C000000068">收納整理</option>
										<option value="C000000069">文具用品</option>
										<option value="C000000070">寵物用品</option>
									</optgroup>
									<optgroup label="圖書文具">
										<option value="C000000071">圖書文具</option>
										<option value="C000000072">書籍</option>
										<option value="C000000073">紙製品</option>
										<option value="C000000074">書寫用具</option>
										<option value="C000000075">檔案收納</option>
										<option value="C000000076">事務用品</option>
										<option value="C000000077">美術用具</option>
										<option value="C000000078">手作用品</option>
										<option value="C000000079">兒童文具</option>
										<option value="C000000080">教育玩具</option>
									</optgroup>
									<optgroup label="旅遊戶外">
										<option value="C000000081">旅遊戶外</option>
										<option value="C000000082">行李箱</option>
										<option value="C000000083">背包</option>
										<option value="C000000084">帳篷</option>
										<option value="C000000085">睡袋</option>
										<option value="C000000086">登山用具</option>
										<option value="C000000087">釣魚用具</option>
										<option value="C000000088">燒烤用具</option>
										<option value="C000000089">戶外裝備</option>
										<option value="C000000090">健身器材</option>
									</optgroup>
								</select>
							</span>
						</p>
						<p>
							<span>商品規格</span>
							<span><button type="button" class="productSpecAll_button btn btn-secondary btn-XM"
									style="color: white;" data-bs-toggle="modal"
									data-bs-target="#productSpecAll_button">查看現有規格</button></span>
							<span><button type="button" class="product_create_button btn btn-secondary btn-S"
									style="color: white;" data-bs-toggle="modal"
									data-bs-target="#product_create_button">新增規格</button></span>

						</p>
						<p>
							<span>商品售價</span>
							<span><input class="product_price" type="text" placeholder="NT$" value=""></span>
						</p>
						<p class="initialStock_p">
							<span>首次備貨量</span>
							<span class="initialStock_totoal">0</span>
						</p>
						<div class="button-container" style=" text-align: center;">
							<button onclick="uploadInsert(event)" class="btn btn-L btn-primary"
								style="margin-right: 10px;">送出</button>
							<button onclick=" history.back()" class="btn btn-L btn-primary">取消</button>
						</div>
					</div>
				</main>

			</main>

		</div>

	</main>
	<!-- -------------------以下是新申請規格彈窗內容------------------- -->
	<div class="modal fade" id="product_create_button" tabindex="-1" role="dialog" aria-labelledby="myModalLabel-1"
		aria-hidden="true">
		<div class="modal-dialog modal-lg" role="document">
			<div class="modal-content">
				<div class="modal-header">
					<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
				</div>
				<div class="modal-body d-flex flex-column justify-content-center align-items-center">
					<h1 class="modal-title" style="text-align: center;">商品規格</h1>
					<p style="font-size: 6px;">*商品規格編號待系統自動產生</p>
					<div class="container" style="text-align: right;margin-bottom: 10px;">
						<button class="create_btn btn btn-primary btn-S" type="button">+新增規格</button>
					</div>
					<div>
						<table class="spec_table_new">
							<thead>
								<tr>
									<th>規格圖</th>
									<th>規格類型一</th>
									<th>規格一詳細</th>
									<th>規格類型二</th>
									<th>規格二詳細</th>
									<th>首次備貨量</th>
									<th>刪除規格</th>
								</tr>
							</thead>
							<tbody>
								<tr>
									<td>
										<img class="product_spec_img" id="specPicture1" src="./image/square.svg" alt="">
										<input type="file" class="img_spc_file" id="file_Spec_Input1"
											data-target="#specPicture1" />
										<label for="file_Spec_Input1"></label>
									</td>
									<td>
										<select class="specType1">
											<option value="1">尺寸</option>
											<option value="2">顏色</option>
											<option value="3">容量</option>
											<option value="4">材質</option>
										</select>

									</td>
									<td>
										<input class="specInfo1" type="text" value="" placeholder="最多10字"
											maxlength="10">
									</td>
									<td>
										<select class="specType2">
											<option value="1">尺寸</option>
											<option value="2">顏色</option>
											<option value="3">容量</option>
											<option value="4">材質</option>
										</select>
									</td>
									<td>
										<input class="specInfo2" type="text" value="" placeholder="最多10字"
											maxlength="10">
									</td>
									<td>
										<input class="initialStock" type="text" value="">
									</td>
									<td>
										<button class="delete_btn btn btn-primary btn-XS" type="button"
											style="display: none;">刪除</button>
									</td>
								</tr>

							</tbody>

						</table>
						<div class="container" style="text-align: center;margin-top: 10px;">
							<button class="Save_new_btn btn btn-primary btn-S" type="button">儲存規格</button>
						</div>

					</div>
				</div>
			</div>
		</div>
	</div>
	<!-- -------------------以下是查看規格彈窗內容------------------------ -->
	<div class="modal fade" id="productSpecAll_button" tabindex="-1" role="dialog" aria-labelledby="myModalLabel-1"
		aria-hidden="true">
		<div class="modal-dialog modal-lg" role="document">
			<div class="modal-content">
				<div class="modal-header">
					<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
				</div>
				<div class="modal-body d-flex flex-column justify-content-center align-items-center">
					<h1 class="modal-title" style="text-align: center;">現有規格</h1>
					<div>
						<table class="spec_table_old">
							<thead>
								<tr>
									<th>規格圖</th>
									<th>規格編號</th>
									<th>規格類型一</th>
									<th>規格一詳細</th>
									<th>規格類型二</th>
									<th>規格二詳細</th>
									<th>首次備貨量</th>
									<th>即時庫存量</th>
								</tr>
							</thead>
							<tbody>


							</tbody>

						</table>
						<div class="container" style="text-align: center;margin-top: 10px;">
							<button class="close_btn btn btn-primary btn-XS" type="button">關閉</button>
						</div>

					</div>
				</div>
			</div>
		</div>
	</div>

	<!-- --------------------------------以下是Footer 勿動！！！！-------------------------------- -->
	<footer id="main-footer" class="footer">

		<div class="container-sm">

			<div class="footer-top row">
				<a class="footer_logo col-sm-2 " href="/"><img class="logo" src="./image/logo.svg" alt=""></a>
			</div>

			<hr class="footer_divider">

			<div class="footer-bottom row justify-content-end">

				<nav class="SNS-nav-list ">

					<a href="" class="Instagram col">
						<div class="Instagram_icon">
							<img src="./image/ant-design_instagram-filled.svg" alt="">
						</div>
					</a>

					<a href="" class="Facebook col">
						<div class="Facebook_icon">
							<img src="./image/mdi_facebook.svg" alt="">
						</div>
					</a>

					<a href="" class="Twitter col ">
						<div class="Twitter_icon">
							<img src="./image/ant-design_twitter-circle-filled.svg" alt="">
						</div>
					</a>
				</nav>
			</div>
		</div>
	</footer>

	<script src="./vendors/bootstrap/bootstrap.bundle.min.js"></script>
	<script src="./vendors/jquery/jquery-3.7.0.min.js"></script>
	<script>


		//針對規格1、2、3、4的整理
		function specTypeName(Str) {
			switch (Str) {
				case '1':
					return '尺寸';
				case '2':
					return '顏色';
				case '3':
					return '容量';
				case '4':
					return '材質';
			}
		}

		//針對規格分類的整理
		function categoryName(num) {
			switch (num) {
				case 'C000000001': return '3C周邊';
				case 'C000000002': return '手機';
				case 'C000000003': return '電腦';
				case 'C000000004': return '攝影器材';
				case 'C000000005': return '耳機';
				case 'C000000006': return '智慧家居';
				case 'C000000007': return '電子配件';
				case 'C000000008': return '遊戲周邊';
				case 'C000000009': return '行動電源';
				case 'C000000010': return '影音娛樂';
				case 'C000000011': return '家用電器';
				case 'C000000012': return '冰箱';
				case 'C000000013': return '洗衣機';
				case 'C000000014': return '電視';
				case 'C000000015': return '冷氣';
				case 'C000000016': return '烤箱';
				case 'C000000017': return '吸塵器';
				case 'C000000018': return '咖啡機';
				case 'C000000019': return '電飯煲';
				case 'C000000020': return '電熱水壺';
				case 'C000000021': return '美妝個清';
				case 'C000000022': return '護膚品';
				case 'C000000023': return '彩妝';
				case 'C000000024': return '保養工具';
				case 'C000000025': return '香水';
				case 'C000000026': return '美髮工具';
				case 'C000000027': return '身體保養';
				case 'C000000028': return '美甲工具';
				case 'C000000029': return '沐浴用品';
				case 'C000000030': return '臉部清潔';
				case 'C000000031': return '流行服飾';
				case 'C000000032': return '男士上衣';
				case 'C000000033': return '女士上衣';
				case 'C000000034': return '男士下著';
				case 'C000000035': return '女士下著';
				case 'C000000036': return '男士外套';
				case 'C000000037': return '女士外套';
				case 'C000000038': return '男士睡衣';
				case 'C000000039': return '女士睡衣';
				case 'C000000040': return '襪子';
				case 'C000000041': return '鞋包配飾';
				case 'C000000042': return '女士包包';
				case 'C000000043': return '男士包包';
				case 'C000000044': return '女鞋';
				case 'C000000045': return '男鞋';
				case 'C000000046': return '飾品';
				case 'C000000047': return '皮帶';
				case 'C000000048': return '手錶';
				case 'C000000049': return '帽子';
				case 'C000000050': return '太陽眼鏡';
				case 'C000000051': return '母嬰用品';
				case 'C000000052': return '嬰兒尿布';
				case 'C000000053': return '嬰兒奶瓶';
				case 'C000000054': return '嬰兒車';
				case 'C000000055': return '嬰兒床';
				case 'C000000056': return '嬰兒衣服';
				case 'C000000057': return '嬰兒餐椅';
				case 'C000000058': return '孕婦用品';
				case 'C000000059': return '嬰兒玩具';
				case 'C000000060': return '嬰兒益智';
				case 'C000000061': return '日用生活';
				case 'C000000062': return '廚房用具';
				case 'C000000063': return '衛生用品';
				case 'C000000064': return '家庭清潔';
				case 'C000000065': return '居家裝飾';
				case 'C000000066': return '浴室用品';
				case 'C000000067': return '寢具用品';
				case 'C000000068': return '收納整理';
				case 'C000000069': return '文具用品';
				case 'C000000070': return '寵物用品';
				case 'C000000071': return '圖書文具';
				case 'C000000072': return '書籍';
				case 'C000000073': return '紙製品';
				case 'C000000074': return '書寫用具';
				case 'C000000075': return '檔案收納';
				case 'C000000076': return '事務用品';
				case 'C000000077': return '美術用具';
				case 'C000000078': return '手作用品';
				case 'C000000079': return '兒童文具';
				case 'C000000080': return '教育玩具';
				case 'C000000081': return '旅遊戶外';
				case 'C000000082': return '行李箱';
				case 'C000000083': return '背包';
				case 'C000000084': return '帳篷';
				case 'C000000085': return '睡袋';
				case 'C000000086': return '登山用具';
				case 'C000000087': return '釣魚用具';
				case 'C000000088': return '燒烤用具';
				case 'C000000089': return '戶外裝備';
				case 'C000000090': return '健身器材';

			}
		}

		//針對圖片整理
		function displayImageFromBase64(base64ImageData) {
			const imageBinaryStr = atob(base64ImageData);
			let len = imageBinaryStr.length;
			const uint8Array = new Uint8Array(len);
			while (len--) {
				uint8Array[len] = imageBinaryStr.charCodeAt(len);
			}
			const blob = new Blob([uint8Array]);
			const blobUrl = URL.createObjectURL(blob); // 產生 Blob URL
			// document.querySelector('#avatar').src = blobUrl; // 設定圖片的 src 屬性
			return blobUrl; // 返回 Blob URL
		}


		//***上傳5張圖片後，圖片會預覽***
		// 對於動態生成的 <input type="file"> 元素的 change 事件使用事件代理
		$(document).on("change", "input[type='file']", function () {
			const targetImg = $(this).data("target");
			const fileInput = this;
			if (fileInput.files && fileInput.files[0]) {
				const reader = new FileReader();
				reader.onload = function (e) {
					$(targetImg).attr("src", e.target.result);
				};
				reader.readAsDataURL(fileInput.files[0]);
			}
		});

		//***上傳圖片功能1***
		let productId;
		const imageFiles = []; // 存儲圖片檔案

		function uploadImages() {
			let imgName = [];
			// 定義上傳圖片的函式
			function uploadImage(fileInput, num) {
				const file = fileInput.files[0];
				if (!file) return;
				imgName.push(num);
				imageFiles.push(file);
			}

			// 依次呼叫上傳圖片函式
			uploadImage(document.getElementById('fileInput1'), 0);
			uploadImage(document.getElementById('fileInput2'), 1);
			uploadImage(document.getElementById('fileInput3'), 2);
			uploadImage(document.getElementById('fileInput4'), 3);
			uploadImage(document.getElementById('fileInput5'), 4);

			// 使用fetch API將所有圖片檔案一次性傳送至後端
			if(imgName.length > 0){
				uploadToBackend(productId, imageFiles, imgName);
			}
			

		}

		//***上傳圖片功能2***	
		function uploadToBackend(productId, files, imgName) {
			const formData = new FormData();
			formData.append('productId', productId);
			formData.append('imgName', imgName);
			files.forEach((file, index) => {
				formData.append('images', file);
			});

			// 使用fetch API傳送FormData格式的圖片資料至後端
			fetch('../product/upload', {
				method: 'POST',
				body: formData,
				headers: {'Authorization': ` Bearer ${jwtToken}`}
			})
				.then(response => {
					if (response.ok) {
						console.log('All images uploaded successfully!');
					} else {
						console.error('Image upload failed!');
					}
				})
				.catch(error => {
					console.error('Error:', error);
				});
		}
		//-----------------------編輯商品導入的判斷-------------------------------------//
		document.addEventListener("coreDone", function () {
			//const registerSupplier = "S000000001";
			// 獲取 URL 的查詢參數
			const queryString = window.location.search;
			const urlParams = new URLSearchParams(queryString);
			if (queryString != 0) {
				// 獲取 productId
				const inquire_productId = urlParams.get('productId');

				let dataToSend_edit = {};
				dataToSend_edit = {productId: inquire_productId, registerSupplier: supplierId};

				// 使用fetch API向後端發送請求
				fetch('../product/product-details', {
					method: 'POST',
					body: JSON.stringify(dataToSend_edit),
					headers: {
						'Content-Type': 'application/json',
						'Authorization': ` Bearer ${jwtToken}`
					}
				})
					.then((response) => {
						// 檢查回應的狀態碼
						if (!response.ok) {
							throw new Error('Network response was not ok');
							console.log(response);
						}
						// 解析JSON格式的回應
						return response.json();
					})
					.then((data) => {
						if (data === 0) {
							console.log(data);
							console.log(data === 0);
							alert("您無權限編輯此商品編號")
							window.history.back();
						} else {
							$('.productId').text(inquire_productId);
							$('.productId').css("font-size", "");
							$('.initialStock_p').hide();
							retrieveProductText(inquire_productId);
							getAllSpecByProduct(inquire_productId);
						}
					})
					.catch((error) => {
						console.error('Fetch error:', error);
					});
			} else {
				$('.productId').text("*由系統自動產生");
				$('.productSpecAll_button').attr('disabled', 'disabled');
			}
		});



		function retrieveProductText(inquire_productId) {
			fetch('../product/retrieveProductText?productId=' + encodeURIComponent(inquire_productId), {
				method: 'GET',
				headers: {'Authorization': ` Bearer ${jwtToken}`}
			})
				.then((response) => {
					// 檢查回應的狀態碼
					if (!response.ok) {
						throw new Error('Network response was not ok');
						console.log(response);
					}
					// 解析JSON格式的回應
					return response.json();
				})
				.then((data) => {
					//console.log(data);
					$("#image1").attr('src', displayImageFromBase64(data.picture1));
					$("#image2").attr('src', displayImageFromBase64(data.picture2));
					$("#image3").attr('src', displayImageFromBase64(data.picture3));
					$("#image4").attr('src', displayImageFromBase64(data.picture4));
					$("#image5").attr('src', displayImageFromBase64(data.picture5));
					$(".productName").val(data.productName);
					$(".product_illustrate").val(data.productInfo);
					$("p span:contains('商品分類')").next().replaceWith(`<span class="category_select">${categoryName(data.categorieId)}</span>`);
					//$(".category_select").val(data.categorieId);
					$(".product_price").val(data.productPrice);

				})
				.catch((error) => {
					console.error('Fetch error:', error);
				});
		}


		//-----------------------新申請規格彈窗作業的地方-------------------------------------//

		// 監聽「+新增規格」按鈕點擊事件
		$('.create_btn').on('click', function () {
			let rowNum = $('.spec_table_new tbody tr').length + 1; //算目前有幾行
			if (rowNum === 2) {
				// 選取第一個刪除按鈕並顯示它
				$(".spec_table_new tbody tr:first-child .delete_btn").show();
				$(".spec_table_new tbody tr:first-child .delete_btn").prop("disabled", true);
			}
			const newRow = `
                    <tr>
                        <td>
                            <img class="product_spec_img" id="specPicture${rowNum}" src="./image/square.svg" alt="">
                            <input type="file" class="img_spc_file" id="file_Spec_Input${rowNum}"
                                data-target="#specPicture${rowNum}" />
                            <label for="file_Spec_Input${rowNum}"></label>
                        </td>
                        <td>
                            <select class="specType1">
                                <option value="1">尺寸</option>
                                <option value="2">顏色</option>
                                <option value="3">容量</option>
                                <option value="4">材質</option>
                            </select>
                        </td>
                        <td><input class="specInfo1" type="text" value="" placeholder="最多10字" maxlength="10"></td>
                        <td>
                            <select class="specType2">
                                <option value="1">尺寸</option>
                                <option value="2">顏色</option>
                                <option value="3">容量</option>
                                <option value="4">材質</option>
                            </select>
                        </td>
                        <td><input class="specInfo2" type="text" value="" placeholder="最多10字" maxlength="10"></td>
                        <td><input class="initialStock" type="text" value=""></td>
                        <td><button class="delete_btn btn btn-primary btn-XS" type="button">刪除</button></td>
                    </tr>
                `;

			$('.spec_table_new tbody').append(newRow);
			rowNum++;
		});


		// 對於刪除按鈕的點擊事件使用事件代理
		$(document).on("click", ".delete_btn", function () {
			$(this).closest("tr").remove(); // 刪除所屬的 <tr> 元素
			let rowNum = $('.spec_table_new tbody tr').length; //算目前有幾行
			if (rowNum === 1) {
				// 選取第一個刪除按鈕並顯示它
				$(".spec_table_new tbody tr:first-child .delete_btn").hide();
			}
		});

		// 收集儲存規格資料
		let dataToSend = [];
		let formDataSpecImg = new FormData();
		// 監聽儲存按鈕點擊事件
		$(".Save_new_btn").click(function () {
			dataToSend = [];
			formDataSpecImg = new FormData();
			// 檢查每一個資料列是否有空值
			var hasEmptyValue = false;
			$(".spec_table_new tbody tr").each(function () {
				var imgInput = $(this).find(".img_spc_file");
				if (!imgInput[0].files || imgInput[0].files.length === 0) {
					hasEmptyImage = true;
					return false; // 跳出 each 迴圈
				}
			});
			$(".spec_table_new tbody tr").each(function () {
				var specType1 = $(this).find(".specType1").val();
				var specInfo1 = $(this).find(".specInfo1").val().trim();
				var specType2 = $(this).find(".specType2").val();
				var specInfo2 = $(this).find(".specInfo2").val().trim();
				var initialStock = $(this).find(".initialStock").val().trim();

				if (specType1 === "" || specInfo1 === "" ||
					specType2 === "" || specInfo2 === "" || initialStock === "") {
					hasEmptyValue = true;
					return false; // 跳出 each 迴圈
				}

				const productPriceValue = parseFloat(initialStock);
				if (isNaN(productPriceValue) || productPriceValue <= 0) {
					hasEmptyValue = true;
					return false; // 跳出 each 迴圈
				}
			});

			// 如果有空值，阻止送出資料
			if (hasEmptyValue) {
				alert("請填寫完整資料");
				return false; // 阻止表單送出
			}


			let imageSpecFiles = [];
			let initialStock_totoal = 0;
			// 收集資料
			$(".spec_table_new tbody tr").each(function () {
				let rowData = {};
				rowData["specType1"] = $(this).find(".specType1").val();
				rowData["specInfo1"] = $(this).find(".specInfo1").val().trim();
				rowData["specType2"] = $(this).find(".specType2").val();
				rowData["specInfo2"] = $(this).find(".specInfo2").val().trim();
				rowData["initialStock"] = $(this).find(".initialStock").val().trim();
				dataToSend.push(rowData);
				const imageFile = $(this).find(".img_spc_file")[0].files[0];
				//console.log(imageFile);
				imageSpecFiles.push(imageFile);
				initialStock_totoal = initialStock_totoal + parseFloat($(this).find(".initialStock").val().trim());
			});
			$('.initialStock_totoal').text(initialStock_totoal.toLocaleString());

			//console.log(imageFiles);
			imageSpecFiles.forEach((imageFile, index) => {
				formDataSpecImg.append('images', imageFile);
			});

			// 關閉彈窗
			$("#product_create_button").modal("hide");

		});

		//上傳新申請規格(text)
		function insertSpecProduct(dataToSend) {
			fetch('../insertSpecProduct', {
				method: 'POST',
				body: JSON.stringify(dataToSend),
				headers: {
					'Content-Type': 'application/json',
					'Authorization': ` Bearer ${jwtToken}`
				}
			})
				.then((response) => {
					// 檢查回應的狀態碼
					if (!response.ok) {
						throw new Error('Network response was not ok');
						console.log(response);
					}
					// 解析JSON格式的回應
					return response.json();
				})
				.then((data) => {
					//console.log(data);

					data.forEach(id => {
						formDataSpecImg.append('productSpecIds', id);
					});
					insertSpecImg(formDataSpecImg);


				})
				.catch((error) => {
					console.error('Fetch error:', error);
				});
		}


		//上傳新申請規格(圖)
		function insertSpecImg(formDataSpecImg) {
			fetch('../uploadSpecPicture', {
				method: 'POST',
				body: formDataSpecImg,
				headers: {'Authorization': ` Bearer ${jwtToken}`}
			})
				.then(response => {
					if (response.ok) {
						console.log('All images uploaded successfully!');
					} else {
						console.error('Image upload failed!');
					}
				})
				.catch(error => {
					console.error('Error:', error);
				});
		}

		//-----------------------查看所有規格彈窗作業的地方-------------------------------------//
		function getAllSpecByProduct(inquire_productId) {
			fetch('../AllSpecByProductID?productId=' + encodeURIComponent(inquire_productId), {
				method: 'GET',
				headers: {'Authorization': ` Bearer ${jwtToken}`}
			})
				.then((response) => {
					// 檢查回應的狀態碼
					if (!response.ok) {
						throw new Error('Network response was not ok');
						console.log(response);
					}
					// 解析JSON格式的回應
					return response.json();
				})
				.then((data) => {
					let list_html = "";
					//console.log(data);
					data.forEach(function (productSpec) {
						// 在這裡對每個產品進行處理
						// 取得產品圖片的 Base64 字串
						const base64Image = displayImageFromBase64(productSpec.specPicture);
						//取得產品規格id
						const productSpecId = productSpec.productSpecId;
						//取得對規格1
						const specType1 = specTypeName(productSpec.specType1);
						const specInfo1 = productSpec.specInfo1;
						//取得對規格2
						const specType2 = specTypeName(productSpec.specType2);
						const specInfo2 = productSpec.specInfo2;
						//取得首次備貨量
						const initialStock = productSpec.initialStock;
						//取得即時庫存
						const specStock = productSpec.specStock;
						// 也可以將其他產品資料顯示在網頁上
						list_html += `
										<tr>
											<td>
												<img class="product_spec_img" id="specPicture1" src="${base64Image}" alt="">
											</td>
											<td>
												${productSpecId}
											</td>
											<td>
												${specType1}
											</td>
											<td>
												${specInfo1}
											</td>
											<td>
												${specType2}
											</td>
											<td>
												${specInfo2}
											</td>
											<td>
												${initialStock}
											</td>
											<td>
												${specStock}
											</td>
										</tr>
									`;
					});
					$('.spec_table_old tbody').html(list_html);

				})
				.catch((error) => {
					console.error('Fetch error:', error);
				});
		}

		// 關閉彈窗
		$(".close_btn").click(function () {
			$("#productSpecAll_button").modal("hide");
		})
		//--------------------------------------------------------------------------//
		//上傳新商品
		function uploadInsert(event) {
			//const registerSupplier = "S000000001"
			const productStatus = "0"
			for (let i = 1; i < 6; i++) {
				if ($(`#image${i}`).attr('src') === './image/square.svg') {
					alert('請選擇圖片');
					event.preventDefault(); // 阻止表單提交
					return; // 終止函數執行
				}
			}
			if ($('.productName').val().trim() === '') {
				alert('請輸入商品名稱');
				return; // 阻止表單提交
			}
			const productName = $('.productName').val().trim();

			if ($('.product_illustrate').val().trim() === '') {
				alert('請輸入商品說明');
				return; // 阻止表單提交
			}
			const productInfo = $('.product_illustrate').val().trim();
			
			if ($('.productId').text() == "*由系統自動產生" && ($('.category_select').val() === null || $('.category_select').val() === '')) {
				alert('請選擇商品分類');
				return; // 阻止表單提交
			}
			const categorieId = $('.category_select').val();
			
			
			const productPriceValue = parseFloat($('.product_price').val().trim());
			if ($('.product_price').val().trim() === '') {
				alert('請輸入商品售價');
				return; // 阻止表單提交
			} else if (isNaN(productPriceValue) || productPriceValue <= 0) {
				alert('商品售價不可小於等於0，請重新輸入數字');
				return; // 阻止表單提交
			}
			const productPrice = $('.product_price').val().trim();


			if ($('.productId').text() == "*由系統自動產生") {
				if (dataToSend == "") {
					alert('商品規格至少需一種');
					return; // 阻止表單提交
				}

				fetch('../product/insertProduct', {
					method: 'POST',
					body: JSON.stringify({registerSupplier: supplierId, categorieId: categorieId, productName: productName, productPrice: productPrice, productInfo: productInfo, productStatus: productStatus}),
					headers: {
						'Content-Type': 'application/json',
						'Authorization': ` Bearer ${jwtToken}`
					}
				})
					.then((response) => {
						// 檢查回應的狀態碼
						if (!response.ok) {
							throw new Error('Network response was not ok');
							console.log(response);
						}
						// 解析JSON格式的回應
						return response.json();
					})
					.then((data) => {
						productId = data;
						uploadImages();
						dataToSend.forEach(function (row) {
							row["productId"] = `${data}`;
						});
						insertSpecProduct(dataToSend);
						alert(`新增商品成功，商品編號：${data}`);
						location.reload(); // 重新載入整個頁面
					})
					.catch((error) => {
						console.error('Fetch error:', error);
					});
			} else {
				const inquire_productId = $('.productId').text();
				fetch('../product/updateProductText', {
					method: 'POST',
					body: JSON.stringify({productId: inquire_productId, productName: productName, productPrice: productPrice, productInfo: productInfo}),
					headers: {
						'Content-Type': 'application/json',
						'Authorization': ` Bearer ${jwtToken}`
					}
				})
					.then((response) => {
						// 檢查回應的狀態碼
						if (!response.ok) {
							throw new Error('Network response was not ok');
							console.log(response);
						}
						// 解析JSON格式的回應
						return response.json();
					})
					.then((data) => {
						if (data) {
							productId = inquire_productId;
							uploadImages();
							if (dataToSend != "") {
								dataToSend.forEach(function (row) {
									row["productId"] = inquire_productId;
								});
								insertSpecProduct(dataToSend);
							}
							alert("修改商品成功");
							//window.location.href = "productManage.html";
						}

					})
					.catch((error) => {
						console.error('Fetch error:', error);
					});
			}





		}


	</script>
</body>

</html>